<html>
  <head>
    <link rel="stylesheet" href="../../css/spectre.min.css">
  </head>
  <body>
    <div id="data"></div>

    <script src="../../core/lib/interface.js"></script>
    <script>
var dataElement = document.getElementById("data");

function saveHeartRateData() {
  Util.showModal("Saving...");
  var csvContent = "Timestamp,Heart Rate(bpm),HRV(ms)\n";
  // Assuming logData contains the heart rate data
  logData.forEach(entry => {
    csvContent += `${entry.timestamp},${entry.heartRate},${entry.hrv}\n`;
  });
  var fileName = "heart_rate_data.csv"; // Set the desired file name
  Util.saveCSV(fileName, csvContent, function(success) {
    if (success) {
      dataElement.innerHTML = "<p>Heart rate data saved successfully</p>";
    } else {
      dataElement.innerHTML = "<p>Error saving heart rate data</p>";
    }
    Util.hideModal();
  });
}

function deleteHeartRateData() {
  Util.showModal("Deleting...");
  var fileName = "heart_rate_data.csv"; // Set the desired file name
  Util.eraseStorageFile(fileName, function(success) {
    if (success) {
      dataElement.innerHTML = "<p>Heart rate data deleted successfully</p>";
    } else {
      dataElement.innerHTML = "<p>Error deleting heart rate data</p>";
    }
    Util.hideModal();
  });
}

// Called when app starts
function onInit() {
  // Only show options to save or delete data
  saveHeartRateData();
  deleteHeartRateData();
}

    </script>
  </body>
</html>
