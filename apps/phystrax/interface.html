<html>
  <head>
    <link rel="stylesheet" href="../../css/spectre.min.css">
  </head>
  <body>
    <div id="data"></div>

    <script src="../../core/lib/interface.js"></script>
    <script>
var dataElement = document.getElementById("data");

function displayOptions() {
  // Display options to save the heart rate data file
  dataElement.innerHTML = `
    <button class="btn btn-primary" onclick="saveHeartRateData()">Save</button>
  `;
}

function saveHeartRateData() {
  Util.showModal("Saving...");
  var fileName = "heart_rate_data.csv"; // Set the file name to save
  // Read the heart rate data from the watch's storage
  Util.readStorageFile(fileName, function(data) {
    // Save the data to the device through app loader
    Util.saveFileToDevice(fileName, data, function(success) {
      if (success) {
        dataElement.innerHTML = "<p>Heart rate data saved successfully</p>";
      } else {
        dataElement.innerHTML = "<p>Error saving heart rate data</p>";
      }
      Util.hideModal();
    });
  });
}

// Called when app starts
function onInit() {
  // Display option to save data
  displayOptions();
}

    </script>
  </body>
</html>
